Header: Modul-Filter schreiben (de)

Topic: Einen Filter als Teil eines Moduls installieren
        
Ist der Filter Teil eines normalen Modules, sind lediglich die Dateien install.php und uninstall.php
des Modules entsprechend um Aufrufe von <opf_register_filter()> und <opf_unregister_filter()> zu erg&auml;nzen,
und eine Datei mit der Filter-Funktion hinzuzuf&uuml;gen.

Zus&auml;tzlich k&ouml;nnen (und sollten) Sie WebsiteBakers Precheck-System benutzen,
um zu pr&uuml;fen ob Outputfilter-Dashboard installiert ist.


install.php:
        ><?php
        >
        >// normal content from install-file here
        >// ...
        >
        >// check whether outputfilter-module is installed {
        >if(file_exists(WB_PATH.'/modules/outputfilter_dashboard/functions.php'))
        >  require_once(WB_PATH.'/modules/outputfilter_dashboard/functions.php');
        >  // install filter
        >  //---Searchengine-Highlighter-Filter-------------------------------------------
        >  //=============================================================================
        >  opf_register_filter(array(
        >      'name' => 'Searchengine Highlighter',
        >      'type' => OPF_TYPE_PAGE_LAST,
        >      'file' => '{SYSVAR:WB_PATH}/modules/mymodule/filter.php',
        >      'funcname' => 'opff_searchengine_highlight',
        >      'desc' => "Google-Search-Highlighter",
        >      'active' => 1,
        >      'allowedit' => 0
        >  ));
        >}
        >
        >// rest of install-file here
        >// ...
        >

uninstall.php:
        ><?php
        >
        >// normal content from uninstall-file here
        >// ...
        >
        >// check whether outputfilter-module is installed {
        >if(file_exists(WB_PATH.'/modules/outputfilter_dashboard/functions.php')) {
        >  require_once(WB_PATH.'/modules/outputfilter_dashboard/functions.php');
        >  // un-install filter
        >  opf_unregister_filter('Searchengine Highlighter');
        >}
        >
        >// rest of uninstall-file here
        >// ...


filter.php:
        Diese Datei enth&auml;lt die Filter-Funktion.
        See <The Filter-Function itself>.
        ><?php
        >if(!defined('WB_PATH')) die(header('Location: ../../index.php'));
        >
        >function opff_cachecontrol(&$content, $page_id, $section_id, $module, $wb) {
        >        // function code here
        >
        >        return(TRUE);
        >}


Topic: precheck.php
        &Uuml;berpr&uuml;fen Sie vor der installation, ob Outputfilter-Dashboard installiert ist.
        F&uuml;gen Sie dazu Ihrem Modul eine Datei !precheck.php! mit dem folgenden Inhalt hinzu
        >// prevent this file from being accessed directly
        >if(!defined('WB_PATH')) die(header('Location: ../index.php'));
        >
        >$PRECHECK = array();
        >$PRECHECK['WB_VERSION'] = array('VERSION'=>'2.8', 'OPERATOR'=>'>=');
        >$PRECHECK['WB_ADDONS'] = array(
        >        // Outputfilter-Dashboard must be installed
        >        'outputfilter_dashboard'=>array('VERSION'=>'1.3.2', 'OPERATOR'=>'>=')
        >);        

        Passen Sie die vorausgesetzte Version von Outputfilter-Dashboard wie ben&ouml;tigt an.

